---
layout:     post
title:      Tableau《入门指南》学习笔记
subtitle:   
date:       2020-01-01
author:     阳光和鱼
header-img: img/post-bg-desk.jpg
catalog: true
tags:
    - 数据可视化
    - Tableau
---

## 为什么要学入门指南

学习tableau官方文档有两种策略，一种系统学习，即从头开始学，这时请**忽略**文章中的超链接，因为他们会在将来陆续看到；而如果是查漏补缺则可以针对性学习，根据需要搜索感兴趣内容即可，此时，可以点击超链接进行扩展。

[《入门指南》](https://help.tableau.com/current/pro/desktop/zh-cn/gettingstarted_overview.htm)是tableau的官方教程的第一部分，也是夯实基础的。虽然tableau很好上手，几乎不学任何资料也可以做出不错的图，但不要因此认为自己已经基本掌握了tableau的使用（达因效应陷阱）。回想一下，自己做可视化时，如果有以下情况，务必从头到尾学习入门指南，从而避免低效的可视化工作：

1. 只会随意拖拽（像我现在），对展示出来的结果，经常诧异和茫然；
2. 不了解何时应使用合适的图表或维度来展示数据；
3. 对图标，维度和度量，“区”、维度等概念不清楚。

如果要系统学习此部分《入门指南》，大概需要4.5小时，此篇文章为重点记录，方便日后查看。

弱项：工具栏，页面，分析

## 基本概念

浏览tableau环境

数据源的每个字段包含**数据类型**和**角色**两部分。

- **数据类型**：整数，字符串，日期，布尔值等。

- **角色**：离散维度或连续度量（常见），连续维度或离散度量（不太常见）。

  

  离散和连续是数学概念，维度和度量是使用tableau时需要认真区分的。

- **维度**：分类数据，一般为定量值，可以使用维度进行分类、分段及揭示数据中的详细信息，如城市，日期，客户等。维度无法聚合。

  - **日期维度**可能为离散维度或连续维度。包含**字符串**或**布尔值**的维度不能是连续维度。
  - 相关维度可以分组到文件夹或分组为分层结构，如国家、省、市、区

- **度量**：数字数据，为可测量的数字定量值，如销售额，利润等，度量可以聚合（sum，avg，max，min等）。

  - 所有度量都可能为离散度量或连续度量。

    

  不同数据标识了蓝色和绿色两种颜色，蓝色代表离散，绿色代表连续。

  ![lJZDat.png](https://s2.ax1x.com/2020/01/01/lJZDat.png)

  

## 知识点

1. **在图表中增添字段**的四种方法：拖动到行/列，拖动到工作表区域，双击，点击并选择“智能显示”中的某一图表类型。

2. 维度必须在度量左侧。

3. **对字段或聚合添加颜色**时：

   1. 如果数据中有此字段，会进行分配唯一颜色；
   2. 如果数据中没有此字段，会进行标记分离，并匹配唯一颜色；

4. **开始页面**包括：连接、打开、发现三部分。初期配合官网学习时，建议使用官方提供的示例数据，如连接英文字段的数据源（如“Sample Superstore”），而非中文数据源“示例-超市”，与官方教程一致，便于理解。

5. 数据源中有**元数据网格**，方便快速检查数据表结构。

6. ** 工作簿中的撤销**可以无限次撤销，返回到上次打开工作簿时，即使中途进行了保存，也不受影响。

7. 设置格式——单元格大小，当字段较长，可以进行适当调整。快捷键ctrl+(shift)+B

8. Tableau Server 和 Tableau Online的工具栏有下载（图像，数据，交叉表，pdf）功能。

9. “预测”仅用于tableau desktop

10. 可以显示和隐藏左侧的数据窗格。

11. **记录数**字段为数字1，该数字与数据源每一行关联。

12. **添加参考线**两种方式：“分析”——“参考线”；或右键单击相关轴，并选择“编辑参考线”

13. 若想将新字段添加到颜色而不替换现有字段，请在将新字段拖到“标记”卡的**“颜色”**上时按住键盘上的 SHIFT 键。

14. **隐藏和筛选差异**：隐藏依然可以使用数据，如计算累计平均值时。筛选则不能。]

15. 在使用多个度量时，隐藏字段标题可能十分有用。

16. 使用“度量值”时，可以根据需要创建单独的颜色图例，否则使用默认的合并图例。

17. tableau中的“交叉表”即为”数据透视表“

18. 使用右下角的状态栏，切换到缩略图时，可以右键进行“刷新所有缩略图”

19. 右键单击工作表可以对其设置颜色。

20. 演示模式下，可以使用左右箭头→进行工作表间切换。

21. 不同的 Tableau 专用文件类型来保存工作：

    - 工作簿（.twb）：包含一个或多个工作表等
    - 书签(.tbm)：包含单个工作表，可以简便、快速分享所做工作。
    - 打包数据文件(twbx)：包含了原始数据和背景图像，方便分享。
    - 数据提取（.hyper 或 .tde）：可用于在脱机工作时与他人共享数据以及提高性能。
    - 数据连接文件（.tds）：用于快速连接到您经常使用的原始数据的快捷方式
    - 打包数据源 (.tdsx)：

22. 修改默认储存位置：文件——储存库位置

23. Tableau中的图标含义：[Tableau Desktop 中的视觉提示和图标](https://help.tableau.com/current/pro/desktop/zh-cn/tips_visualcues.htm)

24. **Tableau 的操作顺序*

    1. Tableau 中的操作顺序（有时称为查询管道）是指 Tableau 将执行各种动作的顺序。由于很多操作都应用筛选器，此顺序会受筛选器的影响。

       操作顺序从上到下包括以下各项。

       ![lJngxO.png](https://s2.ax1x.com/2020/01/01/lJngxO.png)

       Fixed LOD：比如5个城市销售额各占20%，当通过筛选去掉两个城市后，三个城市仍显示原来的占比（20%），而不是当前的33.3%。

    筛选器高级用法

    1、纽约市销售额前十位：

    ​	转换为一个上下文筛选器

    2、占总销售额的百分比将如何按产品子类列出？而不受筛选影响。

    ​	创建表计算：SUM([Sales])/SUM({FIXED : SUM([Sales])})

25. 方差和方差（总体）的区别：

26. “方差（总体）”适用于较大的样本大小。

27. 选择适合的图表

    - 一段时间的改变：折线图、斜率图和突出显示表格，描述变化相关。

    - 关联：两个变量之间关系。描述相关性。散点图，热图

    - 量级：显示两个及以上离散项的相对大小，条形图、填充气泡图、折线图。最高的度量、异常维度，最大最小间差距等。

    - 偏差图：条形图、标靶图、条形图、组合图，使用Z分数来查找偏差的统计显著性。度量偏差基准多远？重要程度。

    - 分布：直方图、人口金字塔、帕累托图、盒形图。

    - 排名：条形图，为“前N个”创建集。

    - 部分与整体关系：饼图、树状图、区域图。贡献的大小

    - 空间：填充地图、点分布图、符号地图、密度地图。

    - 流程：桑吉图。

      更多：[图表类型的选择](https://help.tableau.com/current/pro/desktop/zh-cn/what_chart_example.htm)

28. [Tableau 工作簿性能检查表](https://help.tableau.com/current/pro/desktop/zh-cn/perf_checklist.htm#)

### 进一步学习

对入门指南部分掌握后，实践一段时间，可以继续系统学习其他内容。

### 链接到数据并准备数据

1. 链接到数据源

   ​	csv,txt,tsv等文件使用文本文件链接方式。

2. Tableau 不支持 Excel 中的数据透视表。

3. 多列进行转置：

   ​	在单一 Microsoft Excel、文本文件、Google Sheets 和 .pdf 数据源中选择两个或更多列，右键——转置，检查效果。

   ​	其他数据源，使用自定义SQL进行透视(新版本tableau不支持)。

   

隐藏字段是缩小数据提取文件大小的一个好方法，因为隐藏的字段会自动从数据提取中排除。

选择**“默认属性”**>**“注释”**，可以对一些不太容易理解的字段名称进行注释，构建供他人使用的工作簿时，注释尤其有用。

设置默认数字格式，如货币符号，折扣的“%”等

设置默认颜色，参考：[调色板和效果](https://help.tableau.com/current/pro/desktop/zh-cn/viewparts_marks_markproperties_color.htm)

使用完整颜色范围	 -858 到 72,986 的值的红-绿发散调色板。应选择“**使用完整颜色范围**”，如下：

​	![image](https://help.tableau.com/current/pro/desktop/zh-cn/Img/viewparts_marks_markproperties_color_fullrange.png)

当对“合计”，“小计”，“总计”也加入颜色，可以通过去除“包括合计”选项。

边框有助于直观地分隔紧密排列的标记，还可以使用不透明度设置显示标记的密度。

![image](https://help.tableau.com/current/pro/desktop/zh-cn/Img/viewparts_marks_markproperties_borders2.png)

标记光环

为了使标记在背景图像或地图上更加明显，可以在每个标记周围环绕一种形成鲜明对比的纯色，这种效果称为光环。

![imageguanghuan](https://help.tableau.com/current/pro/desktop/zh-cn/Img/wwd_markhalo1.png)

修改默认排序，例如“High”、“Low”、“Medium”的顺序，可以选择**“默认属性”> “排序”**，指定一种排序。

​	注意：默认排序顺序还会控制视图内筛选器中字段值的列出方式。

添加别名，只能为离散维度的成员创建别名。不能为连续维度、日期或度量创建别名。

度量转换为维度

​	对于唯一值较少的度量值（如折扣），可以修改为维度，或离散值，以便实现想要的效果。

创建分层结构

​	在**“数据”**窗格中，直接将字段拖放到另一个字段的顶部

分组的应用

 1. 用于同一类别的分组；

 2. 使用组为视图设置颜色，如华东地区分组颜色；

 3. 用于对错误标签的订正数据错误，如“内蒙古”，“内蒙古自治区”分为同一组。

集的使用场景：

- 集成员对总额的贡献程度如何？

- 两个集的合并

- 分层集和下级

  为前N和其他创建集（再复习）

  

创建参数

参数是可在计算、筛选器和参考线中替换常量值的动态值。